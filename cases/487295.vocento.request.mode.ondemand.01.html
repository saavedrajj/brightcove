<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>IMA3 - requestMode: ondemand</title>
	<link href="//players.brightcove.net/videojs-ima3/3/videojs.ima3.min.css" rel="stylesheet">
	<style>
	.video-js {
		width: 480px;
		height: 270px;
	}
</style>
</head>

<body>
	<h1>IMA3 - requestMode: ondemand</h1>
	<video 
	id="myPlayerID"
	data-video-id="5575865276001" 
	data-account="5458602755001" 
	data-player="default" 
	data-embed="default" 
	data-application-id 
	class="video-js" 
	controls muted playsinline></video>
	<script src="//players.brightcove.net/5458602755001/default_default/index.min.js"></script>
	<script src="//players.brightcove.net/videojs-ima3/3/videojs.ima3.js"></script>				
	<button type="button" class="btn btn-primary" onclick="doAdsRequest1();">Make Ad request 1</button>
	<button type="button" class="btn btn-primary" onclick="doAdsRequest2();">Make Ad request 2</button>	
	<script type="text/javascript">
		bc('myPlayerID').ima3({
			adTechOrder: ['html5'],
			serverUrl: '',
			requestMode: 'ondemand', 
			timeout: 6000, 
			debug: true,
			hardTimeouts: false,
			loadingSpinner: false,
			vpaidMode: 'ENABLED',
			ima3SdkSettings: {
			disableCustomPlaybackForIOS10Plus: true, // enables skippable ads on iOS
			numRedirects: 10
		} 
	});

		var myPlayer = videojs("myPlayerID");

		var prerollAdTag = "https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=vmap&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ar%3Dpreonlybumper&cmsid=496&vid=short_onecue&correlator={timestamp}";	

		var nonPrerollAdTag = "http://cs1.brightcodes.net/simon/ads/VastResponse2.xml?correlator={timestamp}'"

		function doAdsRequest1() {
			myPlayer.ima3.adrequest(prerollAdTag);
		}
		function doAdsRequest2() {
			myPlayer.ima3.adrequest(prerollAdTag);
		}	
	</script>



</body>
</html>