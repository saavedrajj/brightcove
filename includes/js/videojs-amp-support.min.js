/**
 * videojs-amp-support
 * @version 0.1.0
 * @copyright 2017 mister-ben <git@misterben.me>
 * @license Apache-2.0
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],t):e.videojsAmpSupport=t(e.videojs)}(this,function(e){"use strict";e="default"in e?e.default:e;var t,o,n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},i=t="undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:{},a={},d=(Object.freeze||Object)({default:a}),r=d&&a||d,p=void 0!==n?n:"undefined"!=typeof window?window:{};"undefined"!=typeof document?o=document:(o=p["__GLOBAL_DOCUMENT_CACHE@4"])||(o=p["__GLOBAL_DOCUMENT_CACHE@4"]=r);var s=o,f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u={paramsObj:"params",globalParams:[]},l=function t(o){var n=this,a=i.bc?i.bc.VERSION:null;if(o=e.mergeOptions(u,o),n.addClass("vjs-amp-support"),"https://players.brightcove.net"===s.location.origin&&"function"==typeof i.addEventListener&&"function"==typeof i.postMessage&&i.parent!==i){if(e.log("AMP Support loaded"),n.on(["play","playing","pause","volumechange"],function(e){i.parent.postMessage({event:e.type,muted:n.muted(),playing:!n.paused()},"*")}),i.addEventListener("message",function(e){if(e.data&&("[object Object]"===e.data.toString()||0===e.data.indexOf("{"))){var t=void 0,o=["play","pause","muted","controls"];if("object"===f(e.data))t=e.data;else try{t=JSON.parse(e.data)}catch(e){return}void 0!==t&&t.command&&o.indexOf(t.command)>-1&&n[t.command](t.args)}},!1),n.ready(function(){i.parent.postMessage({event:"ready",muted:n.muted(),playing:!n.paused(),videojsVersion:e.VERSION,bcVersion:a,ampSupportVersion:t.VERSION},"*")}),a){var d=a.split(".");"5"===d[0]&&d[1]<20&&i.addEventListener("orientationchange",function(){s.body.style.removeProperty("width"),i.setTimeout(function(){s.body.style.removeProperty("width")},2)})}for(var r={},p=i.location.search.substring(1).split("&"),l=0;l<p.length;l++){var c=p[l].split("=");r[decodeURIComponent(c[0])]=decodeURIComponent(c[1])}o.paramsObj&&(i[o.paramsObj]=r),o.globalParams.forEach(function(e){r[e]&&(i[e]=r[e])})}};return(e.registerPlugin||e.plugin)("ampSupport",l),l.VERSION="__VERSION__",l});