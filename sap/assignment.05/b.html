<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <script type="text/javascript" lang="javascript" src="https://cdns.gigya.com/js/gigya.js?apikey=3_mK2cmEzLkzhqe4MUrtPncxbv4wKsYAhsew0iVwhVUls3c_Jx_HLX434jAVpq5M_W"></script>
		
		<script type="text/javascript">
			var urlParamsArr = {}; 
			window.onload = function(){
				// Parse the URL parameters into urlParamsArr
				var urlParams = document.location.search.substr(1).split("&");

				for (var i = 0; i < urlParams.length; i++) {
					var ret = urlParams[i].toString().split("=");
					urlParamsArr[ret[0]] = decodeURIComponent(ret[1]);
				}

				// Inject the user's nickname
				document.getElementById('nickname').innerHTML = urlParamsArr["nickname"];

				// Inject the login provider
				document.getElementById('loginProvider').innerHTML = urlParamsArr["loginProvider"];

				// YOUR MISSION:
				//    Enhance the user experience by providing more detail from input parameters
	
            gigya.socialize.addEventHandlers({
                onLogout: onLogoutHandler,
                onConnectionAdded: onConnectionAddedHandler,
                onConnectionRemoved: onConnectionRemovedHandler
            });

            function onLogoutHandler(eventObj) {
        	    console.log("User logout");
            }
             function onConnectionAddedHandler(eventObj) {
        	    console.log("Connection added");
        	    var connectionAdded = eventObj.provider;
        	    console.log(connectionAdded);
            }
            function onConnectionRemovedHandler(eventObj) {
        	    console.log("Connection removed");
        	    var connectionRemoved = eventObj.provider;
        	    console.log(connectionRemoved);        	    
            }                       
		}
		</script>
	</head>
	<body>
		<div class="container">
		<div style="float:left; margin:0px 10px; padding:10px; border:2px solid blue;">
			<p>
				Welcome, <span id="nickname"></span>!
				<p>You authenticated with <span id="loginProvider"></span></p>
			</p>
		</div>
		<div style="float:left; margin:0px 10px; padding:10px;">
			<div id="connectionDiv"></div>
			<p>Connection(s): <span id=""></span></p>
		    <script type="text/javascript">
		        gigya.socialize.showAddConnectionsUI({
		            showTermsLink: false, 
		            containerID: "connectionDiv",
		            enabledProviders: "facebook, instagram"
		        });
		    </script>


			<script>
			// Constructing a UserAction Object
			var act = new gigya.socialize.UserAction();
			act.setTitle("This is my title");  // Setting the Title
			act.setLinkBack("http://www.gigya.com");  // Setting the Link Back
			act.setDescription("This is my Description");   // Setting Description
			act.addActionLink("Read More", "http://www.gigya.com");  // Adding Action Link
			 
			// Adding a Media (image)
			act.addMediaItem( { type: 'image', src: 'http://www.infozoom.ru/wp-content/uploads/2009/08/d06_19748631.jpg', href: 'http://www.gigya.com' });
			var params =
			{
			    userAction:act
			};
			 
			// Publishing the User Action          
			gigya.socialize.publishUserAction(params);
			</script>

			<div id="shareDiv"></div>
	        <script type='text/javascript'>
	            var act = new gigya.socialize.UserAction();
	            act.setTitle('Test');
	            act.setDescription('Test Description');
	            act.setLinkBack('http://gigya.com');
	            gigya.socialize.showShareBarUI({
	                containerID: 'shareDiv',
	                shareButtons: 'facebook, twitter, googleplus',
	                userAction: act
	            });
	        </script>

			<!-- YOUR MISSION:
				X 1) Add the Gigya connect component, showAddConnectionsUI, in a containing div
				https://developers.gigya.com/display/GD/socialize.showAddConnectionsUI+JS

				2) From the events generated by the connection component, indicate the connected
				   social network providers on the page (hint: you will need to use addEventHandlers)
				   https://developers.gigya.com/display/GD/socialize.addEventHandlers+JS

				X 3) Modify the logout (below) to use the Gigya logout API call

				X 4) Bonus points: add a sharing experience, either via publishUserAction or showShareUI
				https://developers.gigya.com/display/GD/socialize.publishUserAction+JS
				https://developers.gigya.com/display/GD/socialize.showShareUI+JS
				
				(Note: while implementation is important, layout and user experience also matters.)
			-->
			<input type="button" onclick="logoutGigya()" value="Logout and return to the login page">
		</div>
		<script>
			function logoutGigya() {
                gigya.socialize.logout(); 
			    window.setTimeout( function(){
    		        window.location = "a.html";
  			    }, 1000);
        }
		</script>
	</div>
		<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
	</body>
</html>